<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ["class"],
            theme: {
                container: {
                    center: true,
                    padding: "2rem",
                    screens: {
                        "2xl": "1400px",
                    },
                },
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    },
                    borderRadius: {
                        lg: "var(--radius)",
                        md: "calc(var(--radius) - 2px)",
                        sm: "calc(var(--radius) - 4px)",
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"],
                        mono: ["ui-monospace", "SFMono-Regular", "Menlo", "Monaco", "Consolas", "Liberation Mono", "Courier New", "monospace"],
                    },
                },
            },
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS Variables -->
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;

            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;

            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;

            --primary: 240 5.9% 10%;
            --primary-foreground: 0 0% 98%;

            --secondary: 240 4.8% 95.9%;
            --secondary-foreground: 240 5.9% 10%;

            --muted: 240 4.8% 95.9%;
            --muted-foreground: 240 3.8% 46.1%;

            --accent: 240 4.8% 95.9%;
            --accent-foreground: 240 5.9% 10%;

            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%;

            --border: 240 5.9% 90%;
            --input: 240 5.9% 90%;
            --ring: 240 10% 3.9%;

            --radius: 0.5rem;
        }

        .dark {
            --background: 240 10% 3.9%;
            --foreground: 0 0% 98%;
            --card: 240 10% 3.9%;
            --card-foreground: 0 0% 98%;
            --popover: 240 10% 3.9%;
            --popover-foreground: 0 0% 98%;
            --primary: 0 0% 98%;
            --primary-foreground: 240 5.9% 10%;
            --secondary: 240 3.7% 15.9%;
            --secondary-foreground: 0 0% 98%;
            --muted: 240 3.7% 15.9%;
            --muted-foreground: 240 5% 64.9%;
            --accent: 240 3.7% 15.9%;
            --accent-foreground: 0 0% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 0 0% 98%;
            --border: 240 3.7% 15.9%;
            --input: 240 3.7% 15.9%;
            --ring: 240 4.9% 83.9%;
        }

        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        /* Custom scrollbar to match clean aesthetic */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: hsl(var(--border));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: hsl(var(--muted-foreground));
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }
    </style>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>

<body class="bg-background text-foreground min-h-screen">
    <div class="container mx-auto py-8 px-4 max-w-7xl">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8">
            <div>
                <h1 class="text-3xl font-bold tracking-tight">Redis Queue Dashboard</h1>
                <p class="text-muted-foreground mt-1">Monitor and manage your message queues in real-time.</p>
            </div>
            <div class="flex flex-wrap items-center gap-2">
                <button onclick="refreshData()"
                    class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                    <i data-lucide="refresh-cw" class="mr-2 h-4 w-4"></i> Refresh
                </button>
                <button id="autoRefreshBtn" onclick="toggleAutoRefresh()"
                    class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                    <i data-lucide="play" class="mr-2 h-4 w-4"></i> Auto Refresh (5s)
                </button>
                <button onclick="clearAllQueues()"
                    class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 text-destructive hover:text-destructive">
                    <i data-lucide="trash-2" class="mr-2 h-4 w-4 pointer-events-none"></i> Clear All
                </button>
            </div>
        </div>

        <div id="error-container" class="mb-6 empty:hidden"></div>

        <div id="loading" class="flex flex-col items-center justify-center py-20 text-muted-foreground">
            <i data-lucide="loader-2" class="h-8 w-8 animate-spin mb-4"></i>
            <p>Loading queue data...</p>
        </div>

        <div id="dashboard" style="display: none;" class="space-y-6">
            <!-- Stats -->
            <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                <div class="rounded-xl border bg-card text-card-foreground shadow-sm">
                    <div class="p-6 flex flex-row items-center justify-between space-y-0 pb-2">
                        <h3 class="tracking-tight text-sm font-medium text-muted-foreground">Currently Queued</h3>
                        <i data-lucide="inbox" class="h-4 w-4 text-muted-foreground"></i>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="totalQueued">0</div>
                    </div>
                </div>
                <div class="rounded-xl border bg-card text-card-foreground shadow-sm">
                    <div class="p-6 flex flex-row items-center justify-between space-y-0 pb-2">
                        <h3 class="tracking-tight text-sm font-medium text-muted-foreground">Processing</h3>
                        <i data-lucide="settings" class="h-4 w-4 text-muted-foreground"></i>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="totalProcessing">0</div>
                    </div>
                </div>
                <div class="rounded-xl border bg-card text-card-foreground shadow-sm">
                    <div class="p-6 flex flex-row items-center justify-between space-y-0 pb-2">
                        <h3 class="tracking-tight text-sm font-medium text-muted-foreground">Acknowledged</h3>
                        <i data-lucide="check-circle" class="h-4 w-4 text-muted-foreground"></i>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="totalAcknowledged">0</div>
                    </div>
                </div>
                <div class="rounded-xl border bg-card text-card-foreground shadow-sm">
                    <div class="p-6 flex flex-row items-center justify-between space-y-0 pb-2">
                        <h3 class="tracking-tight text-sm font-medium text-muted-foreground">Failed</h3>
                        <i data-lucide="alert-triangle" class="h-4 w-4 text-muted-foreground"></i>
                    </div>
                    <div class="p-6 pt-0">
                        <div class="text-2xl font-bold" id="totalFailed">0</div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex flex-col space-y-4">
                <div class="w-full">
                    <div
                        class="inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground w-full sm:w-auto">
                        <button onclick="switchTab('main')" id="tab-btn-main"
                            class="tab-btn inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex-1 sm:flex-none"
                            data-state="active">
                            Main Queue <span id="mainQueueBadge"
                                class="ml-2 rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary">0</span>
                        </button>
                        <button onclick="switchTab('processing')" id="tab-btn-processing"
                            class="tab-btn inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex-1 sm:flex-none"
                            data-state="inactive">
                            Processing <span id="processingQueueBadge"
                                class="ml-2 rounded-full bg-primary/10 px-2 py-0.5 text-xs text-primary">0</span>
                        </button>
                        <button onclick="switchTab('dead')" id="tab-btn-dead"
                            class="tab-btn inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex-1 sm:flex-none"
                            data-state="inactive">
                            Dead Letter <span id="deadQueueBadge"
                                class="ml-2 rounded-full bg-destructive/10 px-2 py-0.5 text-xs text-destructive">0</span>
                        </button>
                        <button onclick="switchTab('acknowledged')" id="tab-btn-acknowledged"
                            class="tab-btn inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm flex-1 sm:flex-none"
                            data-state="inactive">
                            Acknowledged <span id="acknowledgedQueueBadge"
                                class="ml-2 rounded-full bg-green-100 dark:bg-green-900/30 px-2 py-0.5 text-xs text-green-700 dark:text-green-300">0</span>
                        </button>
                    </div>
                </div>

                <!-- Tab Contents -->
                <div class="rounded-xl border bg-card text-card-foreground shadow-sm">

                    <!-- Main Queue Content -->
                    <div id="mainTab" class="tab-content block">
                        <div
                            class="p-6 pt-6 pb-4 border-b flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <span class="text-sm font-medium">Type:</span>
                                <select id="mainTypeFilter" onchange="filterByMessageType('main', this.value)"
                                    class="flex h-9 w-full sm:w-[150px] items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50">
                                    <option value="all">All</option>
                                </select>
                            </div>

                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <button id="mainBulkDelete" onclick="bulkDeleteSelected('main')"
                                    class="hidden inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-3">
                                    <i data-lucide="trash-2" class="mr-2 h-4 w-4"></i> Delete Selected
                                </button>
                                <select onchange="changePageSize('main', this.value)"
                                    class="flex h-9 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring">
                                    <option value="10">10 per page</option>
                                    <option value="25" selected>25 per page</option>
                                    <option value="50">50 per page</option>
                                </select>
                            </div>
                        </div>

                        <div class="relative w-full overflow-auto">
                            <table class="w-full caption-bottom text-sm" id="mainQueueTable">
                                <thead class="[&_tr]:border-b">
                                    <tr
                                        class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[50px]">
                                            <input type="checkbox" id="mainSelectAll" onchange="toggleSelectAll('main')"
                                                class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                                        </th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            ID</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Type</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Priority</th>
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[40%]">
                                            Payload</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Created</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Attempts</th>
                                        <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="mainQueueBody" class="[&_tr:last-child]:border-0">
                                </tbody>
                            </table>
                        </div>

                        <div class="p-4 border-t flex items-center justify-between" id="mainPagination">
                            <div class="text-sm text-muted-foreground" id="mainPaginationInfo">
                                Showing 0-0 of 0
                            </div>
                            <div class="flex items-center space-x-2" id="mainPaginationNav">
                            </div>
                        </div>
                    </div>

                    <!-- Processing Queue Content -->
                    <div id="processingTab" class="tab-content hidden">
                        <!-- Similar structure to Main Queue -->
                        <div
                            class="p-6 pt-6 pb-4 border-b flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <span class="text-sm font-medium">Type:</span>
                                <select id="processingTypeFilter"
                                    onchange="filterByMessageType('processing', this.value)"
                                    class="flex h-9 w-full sm:w-[150px] items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50">
                                    <option value="all">All</option>
                                </select>
                            </div>

                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <button id="processingBulkDelete" onclick="bulkDeleteSelected('processing')"
                                    class="hidden inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-3">
                                    <i data-lucide="trash-2" class="mr-2 h-4 w-4"></i> Delete Selected
                                </button>
                                <select onchange="changePageSize('processing', this.value)"
                                    class="flex h-9 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring">
                                    <option value="10">10 per page</option>
                                    <option value="25" selected>25 per page</option>
                                    <option value="50">50 per page</option>
                                </select>
                            </div>
                        </div>

                        <div class="relative w-full overflow-auto">
                            <table class="w-full caption-bottom text-sm" id="processingQueueTable">
                                <thead class="[&_tr]:border-b">
                                    <tr
                                        class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[50px]">
                                            <input type="checkbox" id="processingSelectAll"
                                                onchange="toggleSelectAll('processing')"
                                                class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                                        </th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            ID</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Type</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Priority</th>
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[40%]">
                                            Payload</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Processing Since</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Attempts</th>
                                        <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="processingQueueBody" class="[&_tr:last-child]:border-0">
                                </tbody>
                            </table>
                        </div>

                        <div class="p-4 border-t flex items-center justify-between" id="processingPagination">
                            <div class="text-sm text-muted-foreground" id="processingPaginationInfo">
                                Showing 0-0 of 0
                            </div>
                            <div class="flex items-center space-x-2" id="processingPaginationNav">
                            </div>
                        </div>
                    </div>

                    <!-- Dead Letter Queue Content -->
                    <div id="deadTab" class="tab-content hidden">
                        <div
                            class="p-6 pt-6 pb-4 border-b flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <span class="text-sm font-medium">Type:</span>
                                <select id="deadTypeFilter" onchange="filterByMessageType('dead', this.value)"
                                    class="flex h-9 w-full sm:w-[150px] items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50">
                                    <option value="all">All</option>
                                </select>
                            </div>

                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <button id="deadBulkDelete" onclick="bulkDeleteSelected('dead')"
                                    class="hidden inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-3">
                                    <i data-lucide="trash-2" class="mr-2 h-4 w-4"></i> Delete Selected
                                </button>
                                <select onchange="changePageSize('dead', this.value)"
                                    class="flex h-9 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring">
                                    <option value="10">10 per page</option>
                                    <option value="25" selected>25 per page</option>
                                    <option value="50">50 per page</option>
                                </select>
                            </div>
                        </div>

                        <div class="relative w-full overflow-auto">
                            <table class="w-full caption-bottom text-sm" id="deadQueueTable">
                                <thead class="[&_tr]:border-b">
                                    <tr
                                        class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[50px]">
                                            <input type="checkbox" id="deadSelectAll" onchange="toggleSelectAll('dead')"
                                                class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                                        </th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            ID</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Type</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Priority</th>
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[40%]">
                                            Payload</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Failed At</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Reason</th>
                                        <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="deadQueueBody" class="[&_tr:last-child]:border-0">
                                </tbody>
                            </table>
                        </div>

                        <div class="p-4 border-t flex items-center justify-between" id="deadPagination">
                            <div class="text-sm text-muted-foreground" id="deadPaginationInfo">
                                Showing 0-0 of 0
                            </div>
                            <div class="flex items-center space-x-2" id="deadPaginationNav">
                            </div>
                        </div>
                    </div>

                    <!-- Acknowledged Queue Content -->
                    <div id="acknowledgedTab" class="tab-content hidden">
                        <div
                            class="p-6 pt-6 pb-4 border-b flex flex-col sm:flex-row items-center justify-between gap-4">
                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <span class="text-sm font-medium">Type:</span>
                                <select id="acknowledgedTypeFilter"
                                    onchange="filterByMessageType('acknowledged', this.value)"
                                    class="flex h-9 w-full sm:w-[150px] items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50">
                                    <option value="all">All</option>
                                </select>
                            </div>

                            <div class="flex items-center gap-2 w-full sm:w-auto">
                                <button id="acknowledgedBulkDelete" onclick="bulkDeleteSelected('acknowledged')"
                                    class="hidden inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-destructive text-destructive-foreground hover:bg-destructive/90 h-9 px-3">
                                    <i data-lucide="trash-2" class="mr-2 h-4 w-4"></i> Delete Selected
                                </button>
                                <select onchange="changePageSize('acknowledged', this.value)"
                                    class="flex h-9 items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring">
                                    <option value="10">10 per page</option>
                                    <option value="25" selected>25 per page</option>
                                    <option value="50">50 per page</option>
                                </select>
                            </div>
                        </div>

                        <div class="relative w-full overflow-auto">
                            <table class="w-full caption-bottom text-sm" id="acknowledgedQueueTable">
                                <thead class="[&_tr]:border-b">
                                    <tr
                                        class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[50px]">
                                            <input type="checkbox" id="acknowledgedSelectAll"
                                                onchange="toggleSelectAll('acknowledged')"
                                                class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary">
                                        </th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            ID</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Type</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Priority</th>
                                        <th
                                            class="h-12 px-4 text-left align-middle font-medium text-muted-foreground w-[40%]">
                                            Payload</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Acknowledged At</th>
                                        <th class="h-12 px-4 text-left align-middle font-medium text-muted-foreground">
                                            Attempts</th>
                                        <th class="h-12 px-4 text-right align-middle font-medium text-muted-foreground">
                                            Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="acknowledgedQueueBody" class="[&_tr:last-child]:border-0">
                                </tbody>
                            </table>
                        </div>

                        <div class="p-4 border-t flex items-center justify-between" id="acknowledgedPagination">
                            <div class="text-sm text-muted-foreground" id="acknowledgedPaginationInfo">
                                Showing 0-0 of 0
                            </div>
                            <div class="flex items-center space-x-2" id="acknowledgedPaginationNav">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center text-xs text-muted-foreground mt-8" id="lastUpdated"></div>
    </div>

    <!-- Logic -->
    <script>
        // ... Logic remains mostly same but helper functions return Tailwind classes ...

        let autoRefreshInterval = null;
        let isAutoRefresh = false;

        // Pagination state
        const paginationState = {
            main: { currentPage: 1, pageSize: 25, totalItems: 0, allMessages: [], filteredMessages: [], selectedType: 'all' },
            processing: { currentPage: 1, pageSize: 25, totalItems: 0, allMessages: [], filteredMessages: [], selectedType: 'all' },
            dead: { currentPage: 1, pageSize: 25, totalItems: 0, allMessages: [], filteredMessages: [], selectedType: 'all' },
            acknowledged: { currentPage: 1, pageSize: 25, totalItems: 0, allMessages: [], filteredMessages: [], selectedType: 'all' }
        };

        async function fetchQueueStatus() {
            try {
                const response = await fetch('/api/queue/status');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching queue status:', error);
                throw error;
            }
        }

        function formatTimestamp(timestamp) {
            if (!timestamp) return 'N/A';
            return new Date(timestamp * 1000).toLocaleString();
        }

        function formatPayload(payload) {
            if (typeof payload === 'object') {
                return JSON.stringify(payload, null, 2);
            }
            return String(payload);
        }

        function switchTab(tabName) {
            // Update Tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.setAttribute('data-state', 'inactive');
            });
            document.getElementById(`tab-btn-${tabName}`).setAttribute('data-state', 'active');

            // Update Tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
                content.classList.remove('block');
            });
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
            document.getElementById(`${tabName}Tab`).classList.add('block');
        }

        function changePageSize(queueType, newSize) {
            paginationState[queueType].pageSize = parseInt(newSize);
            paginationState[queueType].currentPage = 1;
            updatePaginatedTable(queueType);
        }

        function changePage(queueType, newPage) {
            const state = paginationState[queueType];
            const totalPages = Math.ceil(state.totalItems / state.pageSize);

            if (newPage >= 1 && newPage <= totalPages) {
                state.currentPage = newPage;
                updatePaginatedTable(queueType);
            }
        }

        function filterByMessageType(queueType, selectedType) {
            const state = paginationState[queueType];
            state.selectedType = selectedType;
            state.currentPage = 1;

            if (selectedType === 'all') {
                state.filteredMessages = state.allMessages;
            } else {
                state.filteredMessages = state.allMessages.filter(message =>
                    (message.type || 'Unknown') === selectedType
                );
            }

            state.totalItems = state.filteredMessages.length;
            updatePaginatedTable(queueType);
        }

        function updateMessageTypeFilter(queueType, messages) {
            const messageTypes = [...new Set(messages.map(msg => msg.type || 'Unknown'))].sort();
            const filterSelect = document.getElementById(`${queueType}TypeFilter`);
            const currentValue = filterSelect.value;

            filterSelect.innerHTML = '<option value="all">All</option>';

            messageTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type;
                option.textContent = type;
                filterSelect.appendChild(option);
            });

            if (messageTypes.includes(currentValue) || currentValue === 'all') {
                filterSelect.value = currentValue;
            } else {
                filterSelect.value = 'all';
                paginationState[queueType].selectedType = 'all';
            }
        }

        function updatePaginationControls(queueType) {
            const state = paginationState[queueType];
            const totalPages = Math.ceil(state.totalItems / state.pageSize);
            const startItem = (state.currentPage - 1) * state.pageSize + 1;
            const endItem = Math.min(state.currentPage * state.pageSize, state.totalItems);

            const infoElement = document.getElementById(`${queueType}PaginationInfo`);
            if (state.totalItems === 0) {
                infoElement.textContent = 'Showing 0-0 of 0';
            } else {
                infoElement.textContent = `Showing ${startItem}-${endItem} of ${state.totalItems}`;
            }

            const navElement = document.getElementById(`${queueType}PaginationNav`);
            navElement.innerHTML = '';

            if (totalPages <= 1) return;

            const createBtn = (text, onClick, disabled, isActive = false) => {
                const btn = document.createElement('button');
                btn.className = `inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-8 w-8 ${isActive ? 'bg-primary text-primary-foreground hover:bg-primary/90' : 'border border-input bg-background hover:bg-accent hover:text-accent-foreground'}`;
                btn.onclick = onClick;
                btn.innerHTML = text;
                btn.disabled = disabled;
                return btn;
            };

            // Previous
            navElement.appendChild(createBtn('<i data-lucide="chevron-left" class="h-4 w-4"></i>', () => changePage(queueType, state.currentPage - 1), state.currentPage === 1));

            // Pages
            const maxVisiblePages = 5;
            let startPage = Math.max(1, state.currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }

            for (let i = startPage; i <= endPage; i++) {
                navElement.appendChild(createBtn(i, () => changePage(queueType, i), false, i === state.currentPage));
            }

            // Next
            navElement.appendChild(createBtn('<i data-lucide="chevron-right" class="h-4 w-4"></i>', () => changePage(queueType, state.currentPage + 1), state.currentPage === totalPages));

            lucide.createIcons();
        }

        function updatePaginatedTable(queueType) {
            const state = paginationState[queueType];
            const startIndex = (state.currentPage - 1) * state.pageSize;
            const endIndex = startIndex + state.pageSize;
            const pageMessages = state.filteredMessages.slice(startIndex, endIndex);

            const bodyId = `${queueType}QueueBody`;
            const badgeId = `${queueType}QueueBadge`;

            const tbody = document.getElementById(bodyId);
            const badge = document.getElementById(badgeId);

            badge.textContent = state.totalItems;

            // Check if active tabs need update (simplified)
            // Ideally we'd only update textContent but clearing innerHTML is standard here
            tbody.innerHTML = '';

            if (pageMessages.length === 0) {
                const emptyRow = document.createElement('tr');
                emptyRow.className = "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted";
                const emptyCell = document.createElement('td');
                emptyCell.colSpan = 8;
                emptyCell.className = 'p-4 align-middle text-center h-24 text-muted-foreground';
                emptyCell.innerHTML = `
                    <div class="flex flex-col items-center justify-center gap-2">
                        <i data-lucide="inbox" class="h-8 w-8 opacity-50"></i>
                        <p>No messages found</p>
                    </div>
                `;
                emptyRow.appendChild(emptyCell);
                tbody.appendChild(emptyRow);
            } else {
                pageMessages.forEach(message => {
                    tbody.appendChild(createTableRow(message, queueType));
                });
            }

            updatePaginationControls(queueType);
            updateBulkDeleteButton(queueType);
            lucide.createIcons();
        }

        function createTableRow(message, queueType) {
            const row = document.createElement('tr');
            row.className = "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted";

            const truncatedId = message.id ? message.id.substring(0, 8) + '...' : 'N/A';
            const fullMessageId = message.id || 'unknown';
            const priority = message.priority || 0;

            let priorityClass = "bg-secondary text-secondary-foreground";
            if (priority === 1) priorityClass = "bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300";
            if (priority === 2) priorityClass = "bg-destructive/10 text-destructive";

            const checkboxHtml = `<input type="checkbox" class="message-checkbox h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary" data-message-id="${fullMessageId}" onchange="updateBulkDeleteButton('${queueType}')">`;
            const idHtml = `<span class="font-mono text-xs" title="${fullMessageId}">${truncatedId}</span>`;
            const typeHtml = `<div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground hover:bg-primary/80">${message.type || 'Unknown'}</div>`;
            const priorityHtml = `<div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent ${priorityClass}">${priority}</div>`;
            const payloadHtml = `<div class="font-mono text-xs text-muted-foreground max-h-[100px] overflow-y-auto whitespace-pre-wrap rounded-md bg-muted p-0">${formatPayload(message.payload || {})}</div>`;
            const deleteBtnHtml = `<button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-muted hover:text-muted-foreground h-8 w-8 text-muted-foreground" onclick="deleteMessage('${fullMessageId}', '${queueType}')" aria-label="Delete message"><i data-lucide="trash-2" class="h-4 w-4"></i></button>`;

            let timestamp = 'N/A';
            if (queueType === 'main') timestamp = formatTimestamp(message.created_at);
            if (queueType === 'processing') timestamp = formatTimestamp(message.processing_started_at || message.created_at);
            if (queueType === 'dead') timestamp = formatTimestamp(message.failed_at || message.created_at);
            if (queueType === 'acknowledged') timestamp = formatTimestamp(message.acknowledged_at || message.created_at);

            let metaHtml = `<span class="text-xs text-muted-foreground">${timestamp}</span>`;
            let attemptsHtml = `<span class="text-xs">${message.attempt_count || 0}</span>`;

            if (queueType === 'dead') {
                attemptsHtml = `<span class="text-xs text-destructive max-w-[150px] truncate block" title="${message.error_message}">${message.error_message || 'Unknown error'}</span>`;
            }

            row.innerHTML = `
                <td class="p-0 align-middle">${checkboxHtml}</td>
                <td class="p-0 align-middle">${idHtml}</td>
                <td class="p-0 align-middle">${typeHtml}</td>
                <td class="p-0 align-middle">${priorityHtml}</td>
                <td class="p-0 align-middle">${payloadHtml}</td>
                <td class="p-0 align-middle">${metaHtml}</td>
                <td class="p-0 align-middle">${attemptsHtml}</td>
                <td class="p-0 align-middle text-right">${deleteBtnHtml}</td>
            `;
            return row;
        }

        function updateQueueTable(bodyId, badgeId, messages, queueType) {
            const state = paginationState[queueType];
            state.allMessages = messages;
            updateMessageTypeFilter(queueType, messages);

            if (state.selectedType === 'all') {
                state.filteredMessages = state.allMessages;
            } else {
                state.filteredMessages = state.allMessages.filter(message =>
                    (message.type || 'Unknown') === state.selectedType
                );
            }

            state.totalItems = state.filteredMessages.length;

            const totalPages = Math.ceil(state.totalItems / state.pageSize);
            if (state.currentPage > totalPages && totalPages > 0) {
                state.currentPage = 1;
            }

            updatePaginatedTable(queueType);
        }

        function updateStats(data) {
            document.getElementById('totalAcknowledged').textContent = data.metadata.totalAcknowledged || 0;
            document.getElementById('totalFailed').textContent = data.metadata.totalFailed;
            document.getElementById('totalQueued').textContent = data.mainQueue.length;
            document.getElementById('totalProcessing').textContent = data.processingQueue.length;
        }

        function showError(message) {
            const errorContainer = document.getElementById('error-container');
            // User Alert Component
            errorContainer.innerHTML = `
                <div class="relative w-full rounded-lg border border-destructive/50 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-destructive text-destructive dark:border-destructive">
                    <i data-lucide="alert-circle" class="h-4 w-4"></i>
                    <h5 class="mb-1 font-medium leading-none tracking-tight">Error</h5>
                    <div class="text-sm opacity-70">${message}</div>
                </div>
            `;
            lucide.createIcons();
            setTimeout(() => {
                errorContainer.innerHTML = '';
            }, 5000);
        }

        async function refreshData() {
            const refreshBtn = document.querySelector('button[onclick="refreshData()"]');
            if (refreshBtn) setButtonLoading(refreshBtn, 'Refreshing...');

            try {
                // Don't hide the dashboard, just show a loading overlay or just update in place? 
                // For smoother UX, let's keep it visible but maybe dim it.
                // But original logic hid it. Let's keep original flow but better.
                // Actually, hiding causes layout shift. Let's ONLY show loader on first load.
                // But the user's original code had hiding.
                // Let's stick to updating in place if dashboard is visible.

                const isFirstLoad = document.getElementById('dashboard').style.display === 'none';

                if (isFirstLoad) {
                    document.getElementById('loading').style.display = 'flex';
                }

                const data = await fetchQueueStatus();

                updateStats(data);
                updateQueueTable('main', 'mainQueueBadge', data.mainQueue.messages, 'main');
                updateQueueTable('processing', 'processingQueueBadge', data.processingQueue.messages, 'processing');
                updateQueueTable('dead', 'deadQueueBadge', data.deadLetterQueue.messages, 'dead');
                updateQueueTable('acknowledged', 'acknowledgedQueueBadge', data.acknowledgedQueue.messages, 'acknowledged');

                if (isFirstLoad) {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('dashboard').style.display = 'block';
                }
                document.getElementById('lastUpdated').textContent = `Last updated: ${new Date().toLocaleString()}`;

            } catch (error) {
                document.getElementById('loading').style.display = 'none';
                showError(`Failed to fetch queue data: ${error.message}`);
            } finally {
                if (refreshBtn) restoreButtonState(refreshBtn);
            }
        }

        function toggleAutoRefresh() {
            const btn = document.getElementById('autoRefreshBtn');

            if (isAutoRefresh) {
                clearInterval(autoRefreshInterval);
                btn.innerHTML = '<i data-lucide="play" class="mr-2 h-4 w-4"></i> Auto Refresh (5s)';
                btn.classList.remove('bg-accent', 'text-accent-foreground'); // Remove active state style
                isAutoRefresh = false;
            } else {
                autoRefreshInterval = setInterval(refreshData, 5000);
                btn.innerHTML = '<i data-lucide="pause" class="mr-2 h-4 w-4"></i> Stop Auto Refresh';
                btn.classList.add('bg-accent', 'text-accent-foreground'); // Add active state style
                isAutoRefresh = true;
            }
            lucide.createIcons();
        }

        async function deleteMessage(messageId, queueType) {
            // Find button within the specific table by ID if possible, but strict selectors are safer
            // The onclick handler identifies the button.
            if (!confirm(`Are you sure you want to delete this message from the ${queueType} queue?`)) {
                return;
            }

            // We need to target the specific button that was clicked. 
            // In the generated HTML, we don't pass 'this'. 
            // We can use event.target in the inline handler or just assume global reload.
            // But let's try to be fancy.
            // Actually, we'll just reload.

            try {
                const response = await fetch(`/api/queue/message/${messageId}`, {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ queueType })
                });

                if (response.ok) {
                    showToast("Message deleted successfully");
                    await refreshData();
                } else {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Failed to delete message');
                }
            } catch (error) {
                showError(`Failed to delete message: ${error.message}`);
            }
        }

        function toggleSelectAll(queueType) {
            const selectAllCheckbox = document.getElementById(`${queueType}SelectAll`);
            const messageCheckboxes = document.querySelectorAll(`#${queueType}QueueTable .message-checkbox`);

            messageCheckboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });

            updateBulkDeleteButton(queueType);
        }

        function updateBulkDeleteButton(queueType) {
            const messageCheckboxes = document.querySelectorAll(`#${queueType}QueueTable .message-checkbox`);
            const checkedBoxes = document.querySelectorAll(`#${queueType}QueueTable .message-checkbox:checked`);
            const bulkDeleteBtn = document.getElementById(`${queueType}BulkDelete`);
            const selectAllCheckbox = document.getElementById(`${queueType}SelectAll`);

            if (checkedBoxes.length > 0) {
                bulkDeleteBtn.classList.remove('hidden');
                bulkDeleteBtn.innerHTML = `<i data-lucide="trash-2" class="mr-2 h-4 w-4"></i> Delete Selected (${checkedBoxes.length})`;
                lucide.createIcons();
            } else {
                bulkDeleteBtn.classList.add('hidden');
            }

            if (messageCheckboxes.length > 0) {
                if (checkedBoxes.length === 0) {
                    selectAllCheckbox.indeterminate = false;
                    selectAllCheckbox.checked = false;
                } else if (checkedBoxes.length === messageCheckboxes.length) {
                    selectAllCheckbox.indeterminate = false;
                    selectAllCheckbox.checked = true;
                } else {
                    selectAllCheckbox.indeterminate = true;
                    selectAllCheckbox.checked = false;
                }
            }
        }

        async function bulkDeleteSelected(queueType) {
            const checkedBoxes = document.querySelectorAll(`#${queueType}QueueTable .message-checkbox:checked`);
            const messageIds = Array.from(checkedBoxes).map(cb => cb.dataset.messageId);

            if (messageIds.length === 0) return;

            if (!confirm(`Delete ${messageIds.length} messages?`)) return;

            const bulkDeleteBtn = document.getElementById(`${queueType}BulkDelete`);
            setButtonLoading(bulkDeleteBtn, 'Deleting...');

            try {
                // Sequential delete as before
                let successCount = 0;
                for (const messageId of messageIds) {
                    try {
                        const response = await fetch(`/api/queue/message/${messageId}`, {
                            method: 'DELETE',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ queueType })
                        });
                        if (response.ok) successCount++;
                    } catch (e) { }
                }

                showToast(`${successCount} messages deleted`);
                await refreshData();

            } catch (error) {
                showError(`Failed to delete messages: ${error.message}`);
            } finally {
                restoreButtonState(bulkDeleteBtn);
            }
        }

        async function clearAllQueues() {
            if (!confirm('Are you sure you want to clear all queues? This action cannot be undone.')) return;

            const clearBtn = document.querySelector('button[onclick="clearAllQueues()"]');
            setButtonLoading(clearBtn, 'Clearing...');

            try {
                const response = await fetch('/api/queue/clear', {
                    method: 'DELETE'
                });

                if (response.ok) {
                    showToast('All queues cleared successfully');
                    await refreshData();
                } else {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'Failed to clear queues');
                }
            } catch (error) {
                showError(`Failed to clear queues: ${error.message}`);
            } finally {
                restoreButtonState(clearBtn);
            }
        }

        function setButtonLoading(button, loadingText = 'Loading...') {
            if (!button) return;
            button.disabled = true;
            button.dataset.originalContent = button.innerHTML;
            button.innerHTML = `<i data-lucide="loader-2" class="animate-spin mr-2 h-4 w-4"></i> ${loadingText}`;
            lucide.createIcons();
        }

        function restoreButtonState(button) {
            if (!button || !button.dataset.originalContent) return;
            button.disabled = false;
            button.innerHTML = button.dataset.originalContent;
            lucide.createIcons();
        }

        function showToast(message) {
            // Simple toast implementation
            const toast = document.createElement('div');
            toast.className = "fixed bottom-4 right-4 z-50 rounded-md border bg-background p-4 text-foreground shadow-md transition-all duration-300 ease-in-out translate-y-2 opacity-0";
            toast.innerHTML = `
                <div class="flex items-center gap-2">
                    <i data-lucide="check-circle" class="h-4 w-4 text-green-500"></i>
                    <p class="text-sm font-medium">${message}</p>
                </div>
            `;
            document.body.appendChild(toast);
            lucide.createIcons();

            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-y-2', 'opacity-0');
            }, 10);

            // Animate out
            setTimeout(() => {
                toast.classList.add('translate-y-2', 'opacity-0');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        document.addEventListener('DOMContentLoaded', () => {
            refreshData();
            lucide.createIcons();
        });
    </script>
</body>

</html>